pool: Office
  #vmImage: windows-2019

variables:
  - name: System.Debug
    value: true

steps:
  - task: NuGetToolInstaller@1
    inputs:
      versionSpec: 5.8.0

  - task: MSBuild@1
    inputs:
      solution: signme.sln
      #msbuildLocationMethod: 'version' # Optional. Options: version, location
      #msbuildVersion: 'latest' # Optional. Options: latest, 16.0, 15.0, 14.0, 12.0, 4.0
      msbuildArchitecture: 'x64' # Optional. Options: x86, x64
      #msbuildLocation: # Optional
      #platform: # Optional
      #configuration: # Optional
      #msbuildArguments: # Optional
      #clean: false # Optional
      #maximumCpuCount: false # Optional
      #restoreNugetPackages: false # Optional
      #logProjectEvents: false # Optional
      #createLogFile: false # Optional
      #logFileVerbosity: 'normal' # Optional. Options: quiet, minimal, normal, detailed, diagnostic

  - pwsh: |
      Get-FileHash x64\Debug\SignmeDynamic.pdb

  - task: PublishSymbols@2
    inputs:
      #symbolsFolder: '$(Build.SourcesDirectory)' # Optional
      searchPattern: '**/*.pdb' 
      indexSources: true # Optional
      publishSymbols: false # Optional
      #symbolServerType: ' ' # Required when publishSymbols == True# Options:  , teamServices, fileShare
      #symbolsPath: # Optional
      #compressSymbols: false # Required when symbolServerType == FileShare
      #detailedLog: true # Optional
      #treatNotIndexedAsWarning: false # Optional
      #symbolsMaximumWaitTime: # Optional
      #symbolsProduct: # Optional
      #symbolsVersion: # Optional
      #symbolsArtifactName: 'Symbols_$(BuildConfiguration)' # Optional
    condition: true

  - pwsh: |
      Get-FileHash x64\Debug\SignmeDynamic.pdb
